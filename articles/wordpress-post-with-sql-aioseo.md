---
title: "WordPressã®è¨˜äº‹æŠ•ç¨¿ã‚’SQLã§ã‚„ã‚‹æ–¹æ³•ã€ã«ã€ŒAll in One SEOã€è¦ç´ ã‚‚è¿½åŠ ã§ã€‚"
emoji: "ğŸ’"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["WordPress", "SQL", "All in One SEO", "SEO"]
published: true
---

# ã¯ã˜ã‚ã«
https://zenn.dev/gk12/articles/wordpress-post-with-sql
ã“ã®è¨˜äº‹ã®ç¶šãã§ã€SQLã«ã‚ˆã‚‹æŠ•ç¨¿ã‚’ã™ã‚‹ã¨ãã«ã€
SEOè¦ç´ ã‚‚è¿½åŠ ã§ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§æŠ•ç¨¿ã—ãŸã„ã¨ã„ã†è¦ä»¶ã«ã¤ã„ã¦è€ƒå¯Ÿã—ã¾ã™ã€‚

## æ”¹å–„ã—ãŸã„ç‚¹
- ã€ŒAll in One SEOã€ã®è¦ç´ ã‚’ã„ã¡ã„ã¡åŸ‹ã‚ã‚‹ã®ãŒé¢å€’

SEOå¯¾ç­–ã§æœ‰åãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ŒAll in One SEOã€ã€‚
WordPressãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ã£ã¦ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ãŸã ã€ã‚„ã¯ã‚Šç™»éŒ²è¦ç´ ã‚’åŸ‹ã‚ã‚‹ã®ãŒé¢å€’ãªã®ã§ã€
SQLã«ã‚ˆã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã®åŠ¹ç‡åŒ–ã‚’å›³ã‚Šã¾ã™ã€‚

# ã“ã®è¨˜äº‹ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨
ã“ã®è¨˜äº‹ã§ã¯ã€ã€ã€ŒAll in One SEOã€ã®è¦ç´ ã‚’åŸ‹ã‚ã‚‹ä½œæ¥­ã‚’åŠ¹ç‡åŒ–ã—ãŸã„ã€‘ã¨ã„ã†è¦ä»¶ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¦ã€ã“ã‚Œã‚’æ”¹å–„ã—ã¾ã™ã€‚
æœ€çµ‚çš„ã«ã¯ã€SQLã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§WordPressã¸ã®æŠ•ç¨¿ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

# ã€ŒAll in One SEOã€ã®è¦ç´ ç™»éŒ²ã®ä»•çµ„ã¿
ã€ŒAll in One SEOã€ã®å„è¦ç´ ã‚‚WordPressã®ä»•çµ„ã¿ã«å‰‡ã£ã¦ã€
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã‚‹ä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã¤ã¾ã‚Šã€ã€Œwp_postsã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®IDã«ç´ã¥ã
ã€ŒAll in One SEOã€ã®è¦ç´ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã€SQLã§å€¤ã‚’UPDATEã™ã‚‹ã“ã¨ã§ã€
ç®¡ç†ç”»é¢ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æŠ•ç¨¿å¯èƒ½ã§ã™ã€‚

å‰å›ã®è¨˜äº‹ã§ä¿ç•™ã«ã—ãŸã€Œwp_aioseo_postsã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã€
è¦ç´ ã‚’æ ¼ç´ã—ã¦ã„ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãªã‚Šã¾ã™ã€‚

WordPressã§ã¯ã€ŒAll in One SEOã€ä»¥å¤–ã§ã‚‚åŒã˜æ‰‹æ³•ã§
ã€Œwp_postmetaã€ã«è¦ç´ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€
è¨˜äº‹IDã«ç´ã¥ã‘ã¦ã„ã‚ã„ã‚æƒ…å ±ã‚’ä¿æŒã—ã¦ã„ã‘ã‚‹æ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ã€‚

# ã€ŒAll in One SEOã€ã®è¨˜äº‹æŠ•ç¨¿ç”¨SQL
ã§ã¯ã€ã“ã“ã‹ã‚‰ã¯å®Ÿéš›ã«SQLã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚

## UPDATEã™ã‚‹ã€Œwp_aioseo_postsã€ãƒ†ãƒ¼ãƒ–ãƒ«
WordPressã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€wp_aioseo_postsãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹é€ ã‚’ç¢ºèªã—ã¾ã™ã€‚

```
mysql> desc wp_aioseo_posts;
+-----------------------------+-----------------+------+-----+---------+----------------+
| Field                       | Type            | Null | Key | Default | Extra          |
+-----------------------------+-----------------+------+-----+---------+----------------+
| id                          | bigint unsigned | NO   | PRI | NULL    | auto_increment |
| post_id                     | bigint unsigned | NO   | MUL | NULL    |                |
| title                       | text            | YES  |     | NULL    |                |
| description                 | text            | YES  |     | NULL    |                |
| keywords                    | mediumtext      | YES  |     | NULL    |                |
| keyphrases                  | longtext        | YES  |     | NULL    |                |
| page_analysis               | longtext        | YES  |     | NULL    |                |
| canonical_url               | text            | YES  |     | NULL    |                |
| og_title                    | text            | YES  |     | NULL    |                |
| og_description              | text            | YES  |     | NULL    |                |
| og_object_type              | varchar(64)     | YES  |     | default |                |
| og_image_type               | varchar(64)     | YES  |     | default |                |
| og_image_url                | text            | YES  |     | NULL    |                |
| og_image_width              | int             | YES  |     | NULL    |                |
| og_image_height             | int             | YES  |     | NULL    |                |
| og_image_custom_url         | text            | YES  |     | NULL    |                |
| og_image_custom_fields      | text            | YES  |     | NULL    |                |
| og_video                    | varchar(255)    | YES  |     | NULL    |                |
| og_custom_url               | text            | YES  |     | NULL    |                |
| og_article_section          | text            | YES  |     | NULL    |                |
| og_article_tags             | text            | YES  |     | NULL    |                |
| twitter_use_og              | tinyint(1)      | YES  |     | 0       |                |
| twitter_card                | varchar(64)     | YES  |     | default |                |
| twitter_image_type          | varchar(64)     | YES  |     | default |                |
| twitter_image_url           | text            | YES  |     | NULL    |                |
| twitter_image_custom_url    | text            | YES  |     | NULL    |                |
| twitter_image_custom_fields | text            | YES  |     | NULL    |                |
| twitter_title               | text            | YES  |     | NULL    |                |
| twitter_description         | text            | YES  |     | NULL    |                |
| seo_score                   | int             | NO   |     | 0       |                |
| schema_type                 | varchar(20)     | YES  |     | default |                |
| schema_type_options         | longtext        | YES  |     | NULL    |                |
| pillar_content              | tinyint(1)      | YES  |     | NULL    |                |
| robots_default              | tinyint(1)      | NO   |     | 1       |                |
| robots_noindex              | tinyint(1)      | NO   |     | 0       |                |
| robots_noarchive            | tinyint(1)      | NO   |     | 0       |                |
| robots_nosnippet            | tinyint(1)      | NO   |     | 0       |                |
| robots_nofollow             | tinyint(1)      | NO   |     | 0       |                |
| robots_noimageindex         | tinyint(1)      | NO   |     | 0       |                |
| robots_noodp                | tinyint(1)      | NO   |     | 0       |                |
| robots_notranslate          | tinyint(1)      | NO   |     | 0       |                |
| robots_max_snippet          | int             | YES  |     | NULL    |                |
| robots_max_videopreview     | int             | YES  |     | NULL    |                |
| robots_max_imagepreview     | varchar(20)     | YES  |     | large   |                |
| tabs                        | mediumtext      | YES  |     | NULL    |                |
| images                      | longtext        | YES  |     | NULL    |                |
| image_scan_date             | datetime        | YES  |     | NULL    |                |
| priority                    | tinytext        | YES  |     | NULL    |                |
| frequency                   | tinytext        | YES  |     | NULL    |                |
| videos                      | longtext        | YES  |     | NULL    |                |
| video_thumbnail             | text            | YES  |     | NULL    |                |
| video_scan_date             | datetime        | YES  |     | NULL    |                |
| location                    | text            | YES  |     | NULL    |                |
| local_seo                   | longtext        | YES  |     | NULL    |                |
| limit_modified_date         | tinyint(1)      | NO   |     | 0       |                |
| created                     | datetime        | NO   |     | NULL    |                |
| updated                     | datetime        | NO   |     | NULL    |                |
+-----------------------------+-----------------+------+-----+---------+----------------+
57 rows in set (0.00 sec)
```

wp_posts.ID = wp_aioseo_posts.post_idã§ç´ã¥ã‘ã¦ã€
wp_aioseo_postsã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«SEOè¦ç´ ã‚’ç™»éŒ²ã—ã¦ã„ãæ„Ÿã˜ã§ã™ã€‚

### æ³¨æ„
wp_postmetaãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚‚ãã‚Œã‚‰ã—ã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã™ãŒã€
ã“ã¡ã‚‰ã¯ä½¿ã‚ã‚Œã¦ãªã•ãã†ã§ã™ã€‚
ã€Œ_aioseo_***ã€ã¨ã„ã†ãã‚Œã‚‰ã—ã„meta_keyãŒã‚ã‚‹ã®ã§ã€
è©¦ã—ã«meta_valueå€¤ã‚’å¤‰ãˆã¦ã¿ã¾ã—ãŸãŒã€ã‚µã‚¤ãƒˆã«åæ˜ ã•ã‚Œãšã€ã§ã—ãŸã€‚

```
mysql> select * from wp_postmeta where post_id = '10601';
+---------+---------+---------------------------------------+-----------------------------------------------------+
| meta_id | post_id | meta_key                              | meta_value                                          |
+---------+---------+---------------------------------------+-----------------------------------------------------+
|  104377 |   10601 | _aioseo_title                         | NULL                                                |
|  104378 |   10601 | _aioseo_description                   | NULL                                                |
|  104379 |   10601 | _aioseo_keywords                      |                                                     |
|  104380 |   10601 | _aioseo_og_title                      | NULL                                                |
|  104381 |   10601 | _aioseo_og_description                | NULL                                                |
|  104382 |   10601 | _aioseo_og_article_section            |                                                     |
|  104383 |   10601 | _aioseo_og_article_tags               |                                                     |
|  104384 |   10601 | _aioseo_twitter_title                 | NULL                                                |
|  104385 |   10601 | _aioseo_twitter_description           | NULL                                                |
+---------+---------+---------------------------------------+-----------------------------------------------------+
```

è©¦ã—ã«meta_key = '_aioseo_description'ã®å€¤ã‚’å¤‰æ›´ã€‚
```
mysql> update wp_postmeta set meta_value = 'sample description' where post_id = '10808' and meta_key = '_aioseo_description';
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0
```

```
mysql> select * from wp_postmeta where post_id = '10808';
+---------+---------+---------------------------------------+-----------------------------------------------------+
| meta_id | post_id | meta_key                              | meta_value                                          |
+---------+---------+---------------------------------------+-----------------------------------------------------+
|  106484 |   10808 | _edit_lock                            | 1654497884:1                                        |
|  106604 |   10808 | _aioseo_title                         | NULL                                                |
|  106605 |   10808 | _edit_last                            | 1                                                   |
|  106620 |   10808 | _aioseo_description                   | sample description                                  |
|  106621 |   10808 | _aioseo_keywords                      |                                                     |
|  106622 |   10808 | _aioseo_og_title                      | NULL                                                |
|  106623 |   10808 | _aioseo_og_description                |                                                     |
|  106624 |   10808 | _aioseo_og_article_section            |                                                     |
|  106625 |   10808 | _aioseo_og_article_tags               |                                                     |
|  106626 |   10808 | _aioseo_twitter_title                 | NULL                                                |
|  106627 |   10808 | _aioseo_twitter_description           | NULL                                                |
+---------+---------+---------------------------------------+-----------------------------------------------------+

```
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã¯å¤‰ã‚ã£ã¦ã„ã‚‹ã‘ã©ã€HTMLã«ã¯åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ã¾ãŸã€meta_valueã‚’SQLã§ä¿®æ­£ã—ã¦ã„ã¦ã‚‚ã€ç®¡ç†ç”»é¢ã‹ã‚‰å†åº¦è¨˜äº‹ã‚’æ›´æ–°ã™ã‚‹ã¨ã€NULLã«ç½®ãæ›ã‚ã‚Šã¾ã™ã€‚


## ã€Œwp_aioseo_postsã€ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®UPDATEæ–‡
æœ¬é¡Œã«æˆ»ã£ã¦ã€ã“ã“ã§ã¯SEOã§ãƒ¡ã‚¤ãƒ³ã¨ãªã‚‹ä¸‹è¨˜ã®2ã¤ã‚’SQLã§INSERTã—ã¦ã¿ã¾ã™ã€‚
- wp_aioseo_posts.title
- wp_aioseo_posts.description

```
mysql> update wp_aioseo_posts set title = 'sample TITLE', description = 'sample description' where post_id = '10808';
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

```

```
mysql> select title, description from wp_aioseo_posts where post_id = '10808' \G;
*************************** 1. row ***************************
      title: sample TITLE
description: sample description
1 row in set (0.00 sec)

```

## SQLã§UPDATEã—ãŸè¨˜äº‹ç”»é¢
æ­£ã—ãHTMLãŒåæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/5c2f74372bcc-20220606.png)

## SQLã§UPDATEã—ãŸè¨˜äº‹ã®ç®¡ç†ç”»é¢
Wordpressç®¡ç†ç”»é¢ã®AIOSEOè¨­å®šã§ä¸‹è¨˜ã®é …ç›®ã«UPDATEã—ãŸå€¤ãŒåæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚
- Snippet Preview
- æŠ•ç¨¿ Title
- Meta Description
![](https://storage.googleapis.com/zenn-user-upload/809eb1c07b11-20220606.png)

# ã¾ã¨ã‚
AIOSEOã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’SQLã§æ›´æ–°ã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ã‚‹ã¨ä¸‹è¨˜ã§ã™ã€‚
1. wp_aioseo_postsãƒ†ãƒ¼ãƒ–ãƒ«ã®æ›´æ–°ã—ãŸã„è¦ç´ ã‚’UPDATEæ–‡ã«è¿½åŠ ã™ã‚‹ã€‚
2. mysqlä¸Šã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã€ã¾ãŸã¯ã€msqlã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œ
```
mysql -u root -p -h localhost wordpress < UPDATE.sql
```
4. ç”»é¢ç¢ºèª

ä»¥ä¸Šã¨ãªã‚Šã¾ã™ã€‚

ã“ã“ã¾ã§èª­ã‚“ã§ã„ãŸã ãã¾ã—ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
æ¬¡å›ã¯ã€ã“ã‚Œã‚‰ã®SQLã‚’ä½¿ã£ã¦ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å‡¦ç†ã‚’è§£èª¬ã—ã¾ã™ã€‚
